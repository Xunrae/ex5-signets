(this["webpackJsonpex5-signets"]=this["webpackJsonpex5-signets"]||[]).push([[0],{164:function(e,t,n){},165:function(e,t,n){},166:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},186:function(e,t,n){},293:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(14),s=n.n(c),i=(n(164),n(36)),o=n(25),u=n(17),l=(n(165),n(166),n(349)),d=n(331),j=n(9),b=n(136),m=(n(295),n(107),{apiKey:"AIzaSyCPHD2u1jjZfQ4d-W5qKImDKg1I9BalT4U",authDomain:"panier-achat-acl.firebaseapp.com",databaseURL:"https://panier-achat-acl-default-rtdb.firebaseio.com",projectId:"panier-achat-acl",storageBucket:"panier-achat-acl.appspot.com",messagingSenderId:"1051741793466",appId:"1:1051741793466:web:00c250df23fef605f36683",measurementId:"G-CXL0KG70X8"}),p="utilisateurs-ex5",f="dossiers";j.a.apps.length||j.a.initializeApp(m);var h=j.a.auth(),O=new b.a.AuthUI(h),x=j.a.firestore();n(175);function g(e){h.onAuthStateChanged((function(t){var n,a,r;e(t),t&&(n=t.uid,a=t.displayName,r=t.email,x.collection(p).doc(n).set({nom:a,courriel:r,datecompte:j.a.firestore.FieldValue.serverTimestamp()},{merge:!0}))}))}var v=n(7);function N(e){var t=e.utilisateur;return Object(v.jsxs)("header",{className:"Entete",children:[Object(v.jsxs)("div",{className:"logo",children:["Signets",Object(v.jsx)(d.a,{variant:"outlined",size:"small",className:"btn-deconnexion",onClick:function(){h.signOut()},children:"D\xe9connexion"})]}),Object(v.jsxs)("div",{className:"utilisateur",children:[t.displayName," ",Object(v.jsx)(l.a,{className:"avatar",alt:t.displayName,src:t.photoURL})]})]})}var y=n(27),D=n.n(y),C=n(48),k=(n(182),n(183),n(335)),S=n(147),A=n(350),I=n(139),w=n.n(I),B=n(140),E=n.n(B),F=n.p+"static/media/couverture.2dc9ece9.webp";function R(e){var t=e.id,n=e.nom,r=e.couleur,c=e.datemodif,s=e.couverture,i=e.gererSupprimer,o=Object(a.useState)(null),l=Object(u.a)(o,2),d=l[0],j=l[1];function b(){j(null)}return Object(v.jsxs)("article",{className:"Dossier",style:{backgroundColor:r},children:[Object(v.jsxs)("div",{className:"couverture",children:[Object(v.jsx)(k.a,{className:"deplacer","aria-label":"d\xe9placer",disableRipple:!0,children:Object(v.jsx)(w.a,{})}),Object(v.jsx)("img",{src:s||F,alt:n})]}),Object(v.jsxs)("div",{className:"info",children:[Object(v.jsx)("h2",{children:n}),Object(v.jsxs)("p",{children:["Modifi\xe9 : ",V(c)]})]}),Object(v.jsx)(k.a,{id:t,className:"modifier","aria-label":"modifier",size:"small","aria-haspopup":"true","aria-controls":"maj-dossier",onClick:function(e){j(e.currentTarget)},children:Object(v.jsx)(E.a,{})}),Object(v.jsxs)(S.a,{id:"maj-dossier",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:b,children:[Object(v.jsx)(A.a,{onClick:b,children:"Modifier"}),Object(v.jsx)(A.a,{onClick:function(){i(t),b()},children:"Supprimer"})]})]})}function V(e){var t=e?new Date(1e3*e.seconds):new Date;return"".concat(t.getDate()," ").concat(["janvier","f\xe9vrier","mars","avril","mai","juin","juillet","ao\xfbt","septembre","octobre","novembre","d\xe9cembre"][t.getMonth()]," ").concat(t.getFullYear())}function M(){return(M=Object(C.a)(D.a.mark((function e(t,n){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.datemodif=j.a.firestore.FieldValue.serverTimestamp(),e.next=3,x.collection(p).doc(t).collection(f).add(n);case 3:return a=e.sent,e.abrupt("return",a.get());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return z.apply(this,arguments)}function z(){return(z=Object(C.a)(D.a.mark((function e(t,n){var a,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],e.t0=n,e.next="date"===e.t0?4:"nomDesc"===e.t0?8:"nomAsc"===e.t0?12:16;break;case 4:return e.next=6,x.collection(p).doc(t).collection(f).orderBy("datemodif","desc").get();case 6:return r=e.sent,e.abrupt("break",20);case 8:return e.next=10,x.collection(p).doc(t).collection(f).orderBy("nom","desc").get();case 10:return r=e.sent,e.abrupt("break",20);case 12:return e.next=14,x.collection(p).doc(t).collection(f).orderBy("nom").get();case 14:return r=e.sent,e.abrupt("break",20);case 16:return e.next=18,x.collection(p).doc(t).collection(f).orderBy("datemodif","desc").get();case 18:return r=e.sent,e.abrupt("break",20);case 20:return r.forEach((function(e){a.push(Object(i.a)({id:e.id},e.data()))})),e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return W.apply(this,arguments)}function W(){return(W=Object(C.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.collection(p).doc(t).collection(f).doc(n).delete();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=n(337),K=n(338),L=n(345),U=Object(G.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function _(e){var t=e.util,n=(e.dossiers,e.setDossiers),a=U(),c=r.a.useState("date"),s=Object(u.a)(c,2),i=s[0],o=s[1];return Object(v.jsx)("div",{id:"SimpleSelect",children:Object(v.jsx)(K.a,{className:a.formControl,children:Object(v.jsxs)(L.a,{labelId:"demo-simple-select-label",id:"simpleSelect",value:i,onChange:function(e){o(e.target.value),P(t,e.target.value).then((function(e){return n(e)}))},children:[Object(v.jsx)(A.a,{value:"date",children:"Date de modification descendante"}),Object(v.jsx)(A.a,{value:"nomAsc",children:"Nom de dossier ascendant"}),Object(v.jsx)(A.a,{value:"nomDesc",children:"Nom de dossier descendant"})]})})})}function q(e){var t,n=e.utilisateur,r=e.etatDossiers,c=Object(u.a)(r,2),s=c[0],l=c[1];function d(e){return j.apply(this,arguments)}function j(){return(j=Object(C.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T(n.uid,t).then((function(){var e=Object(o.a)(s).filter((function(e){return e.id!==t}));l(e)})).catch((function(e){return console.log("\xc9chec de la suppression - Firestore a r\xe9pondu :",e.message)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return document.getElementsByClassName("MuiSelect-nativeInput")[0]&&(t=document.getElementsByClassName("MuiSelect-nativeInput")[0].value),Object(a.useEffect)((function(){P(n.uid,t).then((function(e){return l(e)}))}),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{util:n.uid,dossiers:s,setDossiers:l}),Object(v.jsx)("ul",{className:"ListeDossiers",children:s.length>0?s.map((function(e){return Object(v.jsx)("li",{children:Object(v.jsx)(R,Object(i.a)(Object(i.a)({},e),{},{gererSupprimer:d}))},e.id)})):Object(v.jsxs)("li",{className:"msgAucunDossier",children:["Votre liste de dossiers est vide",Object(v.jsx)("p",{children:";-("})]})})]})}var J=n(343),X=n(145),H=n.n(X);n(186);function Q(){return Object(a.useEffect)((function(){return e="#firebaseui-widget",void O.start(e,{signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID,j.a.auth.FacebookAuthProvider.PROVIDER_ID,j.a.auth.GithubAuthProvider.PROVIDER_ID],signInFlow:"popup"});var e}),[]),Object(v.jsxs)("div",{className:"Accueil",children:[Object(v.jsxs)("h3",{className:"logo",children:["Signets ",Object(v.jsx)("span",{children:"beta"})]}),Object(v.jsxs)("h2",{className:"amorce",children:["Organisez vos signets Web, ",Object(v.jsx)("br",{}),"Simple comme bonjour !"]}),Object(v.jsx)("h4",{className:"connexion-etiquette",children:"Connexion \xe0 Signets"}),Object(v.jsx)("div",{id:"firebaseui-widget"})]})}var Y=n(346),Z=n(347),$=n(342),ee=n(341),te=n(348),ne=n(146);function ae(e){var t=e.ouvert,n=e.setOuvert,r=e.gererAjout,c=Object(a.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(a.useState)(""),j=Object(u.a)(l,2),b=j[0],m=j[1],p=Object(a.useState)("#537169"),f=Object(u.a)(p,2),h=f[0],O=f[1];function x(){o(""),m(""),O("#537169")}return Object(v.jsx)("div",{className:"AjouterDossier",children:Object(v.jsxs)(Z.a,{open:t,onClose:function(){return n(!1)},"aria-labelledby":"form-dialog-title",children:[Object(v.jsx)(te.a,{id:"form-dialog-title",children:"Ajouter un dossier"}),Object(v.jsxs)(ee.a,{children:[Object(v.jsx)(Y.a,{autoFocus:!0,margin:"dense",id:"nomDossier",label:"Nom du dossier",type:"text",fullWidth:!0,onChange:function(e){return o(e.target.value)},defaultValue:i}),Object(v.jsx)(Y.a,{margin:"normal",id:"urlImage",label:"Adresse de l'image de couverture",type:"text",fullWidth:!0,onChange:function(e){return m(e.target.value)},defaultValue:b}),Object(v.jsx)(ne.a,{width:"100%",triangle:"hide",colors:["#537169","#55BBB2","#F6D2A3","#F3D379","#FB7778","#5990B8"],onChangeComplete:function(e,t){return O(e.hex)},color:h})]}),Object(v.jsxs)($.a,{children:[Object(v.jsx)(d.a,{style:{backgroundColor:"#900",color:"#fff",margin:"15px 0"},onClick:function(){n(!1),x()},variant:"contained",children:"Annuler"}),Object(v.jsx)(d.a,{style:{backgroundColor:"#090",color:"#fff",margin:"15px"},className:"btnAjouter",onClick:function(){""!==i&&r(i,b,h),x()},variant:"contained",children:"Ajouter"})]})]})})}function re(){var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)([]),s=Object(u.a)(c,2),l=s[0],d=s[1],j=Object(a.useState)(!1),b=Object(u.a)(j,2),m=b[0],p=b[1];return Object(a.useEffect)((function(){return g(r)}),[]),Object(v.jsx)("div",{className:"Appli",children:n?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(N,{utilisateur:n}),Object(v.jsxs)("section",{className:"contenu-principal",children:[Object(v.jsx)(q,{utilisateur:n,etatDossiers:c}),Object(v.jsx)(ae,{ouvert:m,setOuvert:p,gererAjout:function(e,t,a){var r={nom:e,couverture:t,couleur:a,signets:[]};(function(e,t){return M.apply(this,arguments)})(n.uid,r).then((function(e){return d([].concat(Object(o.a)(l),[Object(i.a)(Object(i.a)({},e.data()),{},{id:e.id})]))})),p(!1)}}),Object(v.jsx)(J.a,{onClick:function(){return p(!0)},className:"ajoutRessource",color:"primary","aria-label":"Ajouter dossier",children:Object(v.jsx)(H.a,{})})]})]}):Object(v.jsx)(Q,{})})}s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(re,{})}),document.getElementById("racine"))}},[[293,1,2]]]);